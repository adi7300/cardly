(this.webpackJsonpcardly=this.webpackJsonpcardly||[]).push([[0],{167:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(18),o=a.n(s),i=a(6),l=a(7),d=a(8),u=a(9),p=(a(167),a(32)),b=a(15),j=a(4),h=a.n(j),m=a(13),v=a(62),f=a.n(v),O="/api/",x=f.a.create({withCredentials:!0}),g=function(e,t){return k(e,"GET",t)};function k(e){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(h.a.mark((function e(t){var a,n,c,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"get",n=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,x({url:"".concat(O).concat(t),method:a,data:n});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S={saveUser:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},getUser:function(e){var t=sessionStorage.getItem(e);return t?JSON.parse(t):null},removeUSer:function(e){sessionStorage.removeItem(e)},clear:function(){sessionStorage.clear()}};var N=f.a.create({withCredentials:!0}),y="/api/auth",w="loggedinUser",A={getLoggedinUser:function(){return S.getUser(w)},login:function(e){return console.log(e),N.post("".concat(y,"/login"),e).then((function(e){return e.data})).then((function(e){return console.log(e),console.log("Login success"),D(e)}))},signup:function(e){return N.post("".concat(y,"/signup"),e).then((function(e){return e.data})).then((function(e){return console.log("Signup success"),D(e)}))},logout:function(){return N.post("".concat(y,"/logout")).then((function(e){return e.data})).then((function(){console.log("Logout success"),S.clear()}))},getUsers:function(){return g("user")}};function D(e){return S.saveUser(w,e),e}var B=a(134),U=a.n(B),P=a(129),I=a.n(P),E=a(135),M=a.n(E),T=a(133),R=a.n(T),_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.loggedInUser,t="G";return e&&(t=e.fullname.substring(0,1)+e.fullname.charAt(e.fullname.indexOf(" ")+1)),Object(n.jsxs)("div",{className:"header-wrapper",children:[Object(n.jsxs)("div",{className:"header-left",children:[Object(n.jsx)(p.b,{to:"/",children:Object(n.jsx)("button",{className:"btn1",children:Object(n.jsx)("span",{className:"btn1-span",children:Object(n.jsx)("span",{className:"header-icon",children:Object(n.jsx)(I.a,{})})})})}),Object(n.jsx)(p.b,{to:"/Cardly",children:Object(n.jsxs)("button",{className:"btn1",children:[Object(n.jsx)("span",{className:"header-icon",children:Object(n.jsx)(R.a,{})}),Object(n.jsx)("span",{className:"header-icon-word",children:"Boards"})]})}),Object(n.jsxs)("form",{className:"header-input flex",children:[Object(n.jsx)("label",{hidden:!0,children:"Search Bar"}),Object(n.jsx)("input",{type:"text"}),Object(n.jsx)("div",{className:this.searchClass,onClick:this.onOpenSearch,children:Object(n.jsx)("div",{className:"header-icon",children:Object(n.jsx)(U.a,{})})})]})]}),Object(n.jsx)("button",{className:"logo-wrapper",children:Object(n.jsx)(p.b,{to:"/",children:Object(n.jsx)("span",{className:"logo",children:"Cardly"})})}),Object(n.jsxs)("div",{className:"header-right",children:[Object(n.jsx)("button",{className:"btn1",children:Object(n.jsx)("div",{className:"btn1-span",children:Object(n.jsx)("span",{className:"header-icon",children:Object(n.jsx)(M.a,{})})})}),e?Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(p.b,{to:"/",children:Object(n.jsxs)("button",{className:"btn1",onClick:this.props.logout,children:[" ",Object(n.jsx)("span",{className:"header-icon-word",children:"Logout"})]})})}):Object(n.jsx)(p.b,{to:"/login",children:Object(n.jsx)("button",{className:"btn1",children:Object(n.jsx)("span",{className:"header-login",children:"Login"})})}),Object(n.jsxs)("div",{className:"header-avatar",children:[" ",Object(n.jsx)("button",{className:"header-username pointer",children:t})]})]})]})}}]),a}(c.Component),L={logout:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.logout();case 3:t({type:"SET_USER",user:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}},F=Object(b.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),L)(_),W=a(25);var q=a(53),G=a(10),z=a(268),J=a(267),V=a(259),H=a(265),K=a(261),X=a(260),Q=a(266),Y=a(85),Z=a.n(Y),$=a(225),ee=a(258),te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loggedinUser:e.props.loggedInUser,loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:""},isSignUp:!1,msg:""},e.loginHandleChange=function(t){var a=t.target,n=a.name,c=a.value;e.setState((function(e){return{loginCred:Object(G.a)(Object(G.a)({},e.loginCred),{},Object(q.a)({},n,c))}}))},e.doLogin=function(){var t=Object(m.a)(h.a.mark((function t(a){var n,c,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,c=n.username,r=n.password,c){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:s={username:c,password:r},e.props.login(s).then((function(t){e.setState({loginCred:{username:"",password:""},loggedInUser:t}),e.props.loggedInUser?e.props.history.push("/cardly"):e.setState({msg:"Invalid username / Password"})})).catch((function(t){console.log("ERR",t),e.setState({msg:"Invalid username / Password"})}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(ee.a,{component:"main",maxWidth:"xs",className:"login-container",children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(n.jsx)(z.a,{style:{margin:"10px",backgroundColor:"blue"},children:Object(n.jsx)(Z.a,{})}),Object(n.jsx)($.a,{component:"h2",variant:"h5",children:"Log in"}),Object(n.jsxs)("form",{onSubmit:this.doLogin,style:{width:"100%",marginTop:"5px"},noValidate:!0,children:[Object(n.jsx)(H.a,{variant:"filled",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"username",name:"username",autoComplete:"username",autoFocus:!0,value:this.state.loginCred.username,onChange:this.loginHandleChange}),Object(n.jsx)(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:this.state.loginCred.password,onChange:this.loginHandleChange}),Object(n.jsx)("label",{className:"login-error-msg",children:this.state.msg}),Object(n.jsx)(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:{marginTop:"10px"},children:"Log in"}),Object(n.jsx)(X.a,{container:!0,children:Object(n.jsx)(X.a,{item:!0,children:Object(n.jsx)(K.a,{href:"#/signup",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]}),Object(n.jsx)(Q.a,{mt:8})]})}}]),a}(c.Component),ae={login:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},ne=Object(b.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),ae)(te),ce=a(35),re={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},formatTime:function(e,t){if(!e.dueDate)return;var a=e.dueDate.split("T"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a[0].substring(6,7)-1],c=a[0].substring(8);return"dateTime"===t?"".concat(n," ").concat(c," at ").concat(a[1]):"".concat(n," ").concat(c," ")},calcDoneTodos:function(e){return e.checklists.reduce((function(e,t){return t.todos.forEach((function(t){e.length++,t.isDone&&e.done++})),e}),{done:0,length:0})}};var se=f.a.create({withCredentials:!0}),oe="/api/board",ie={query:function(){return se.get(oe).then((function(e){return e.data})).catch((function(){return console.log("no data from server")}))},getBoardById:function(e){return se.get("".concat(oe,"/").concat(e)).then((function(e){return e.data}))},saveNewStack:function(e,t){var a=Object(G.a)({},t);return e.id=re.makeId(),a.stacks.push(e),se.put("".concat(oe,"/").concat(a._id),a).then((function(e){return e.data})),Promise.resolve(a)},removeStack:function(e,t,a){var n=Object(G.a)({},a),c=a.stacks.filter((function(t){return t.id!==e}));return n.stacks=c,se.put("".concat(oe,"/").concat(t),n).then((function(e){return e.data})),Promise.resolve(n)},saveStack:function(e,t){var a=Object(G.a)({},t),n=a.stacks.map((function(t){return t.id===e.id?e:t}));return a.stacks=n,se.put("".concat(oe,"/").concat(a._id),a).then((function(e){return e.data})),Promise.resolve(a)},addCard:function(e,t,a){var n=Object(G.a)({},t),c=Object(G.a)({},a);e.id=re.makeId(),e.desc="",e.comments=[],e.members=[],e.labels=[],e.checklists=[],e.dueDate="",e.createdAt=Date.now(),e.coverColor="",e.byMember={_id:"u102",fullname:"Mosh Malka",imgUrl:"https://res.cloudinary.com/dscb3040k/image/upload/v1610463697/Screenshot_2021-01-12_170113_ialgw7.png"},n.cards.push(e);var r=c.stacks.map((function(e){return e.id===n.id?n:e}));return c.stacks=r,se.put("".concat(oe,"/").concat(c._id),c).then((function(e){return e.data})),Promise.resolve(c)},removeCard:function(e,t,a){var n=Object(G.a)({},t),c=Object(G.a)({},a),r=n.cards.filter((function(t){return t.id!==e}));n.cards=r;var s=c.stacks.map((function(e){return e.id===n.id?n:e}));return c.stacks=s,se.put("".concat(oe,"/").concat(c._id),c),Promise.resolve(c)},saveCard:function(e,t,a){var n=Object(G.a)({},e),c=Object(G.a)({},t),r=Object(G.a)({},a),s=c.cards.map((function(e){return e.id===n.id?n:e}));c.cards=s;var o=r.stacks.map((function(e){return e.id===c.id?c:e}));return r.stacks=o,se.put("".concat(oe,"/").concat(r._id),r),Promise.resolve(r)},updateDragCard:function(e,t,a){var n=Object(ce.a)(t),c=Object(G.a)({},a),r=n.find((function(t){return t.id===e.destination.droppableId})),s=Object(ce.a)(r.cards),o=s.splice(e.source.index,1)[0];s.splice(e.destination.index,0,o),r.cards=s;var i=c.stacks.map((function(e){return e.id===r.id?r:e}));return c.stacks=i,se.put("".concat(oe,"/").concat(c._id),c),Promise.resolve(c)},updateDragCardToOtherList:function(e,t,a){var n=e.destination,c=e.source,r=Object(ce.a)(t),s=Object(G.a)({},a),o=r.find((function(e){return e.id===c.droppableId})),i=Object(ce.a)(o.cards);o.cards=i;var l=o.cards.splice(e.source.index,1)[0],d=r.find((function(e){return e.id===n.droppableId})),u=Object(ce.a)(d.cards);return d.cards=u,d.cards.splice(e.destination.index,0,l),se.put("".concat(oe,"/").concat(s._id),s),Promise.resolve(s)},addBoard:function(e){return se.post("".concat(oe),e).then((function(e){return e.data}))},removeBoard:function(e){return se.delete("".concat(oe,"/").concat(e))},moveStack:function(e,t,a){var n=e.destination,c=e.source,r=Object(ce.a)(t),s=Object(G.a)({},a),o=r.splice(c.index,1)[0];return r.splice(n.index,0,o),s.stacks=r,se.put("".concat(oe,"/").concat(s._id),s),Promise.resolve(s)}};var le=a(136),de=a.n(le),ue=function(){var e;return{setup:function(){e=de()("")},on:function(t,a){e.on(t,a)},off:function(t,a){e.off(t,a)},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}}}();function pe(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.query();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("boardActions: err in loadBoards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function be(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.getBoardById(e);case 3:n=t.sent,a({type:"SET_BOARD",board:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("boardActions: err in loadBoard",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function je(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("UPDATE BOARD"),a({type:"UPDATE_BOARD",board:e})}catch(n){console.log("boardActions: err in loadBoard",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}window.socketService=ue;var he=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=(e.onRemove,t.style.bgc);return Object(n.jsx)("div",{className:"board-preview",children:Object(n.jsx)("div",{className:"board-preview-image",style:a.startsWith("#")?{backgroundColor:a}:{backgroundImage:"url(".concat(a,")")},children:Object(n.jsx)(p.b,{to:"./cardly/".concat(t._id),children:Object(n.jsx)("div",{className:"board-preview-card",children:Object(n.jsx)("h3",{className:"board-preview-title",children:t.title})})})})})}}]),a}(c.Component),me=a(65),ve=a.n(me),fe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={board:{activities:[],createdAt:Date.now(),createdBy:{},members:[],stacks:[{id:re.makeId(),cards:[],style:{},title:"New List"}],style:{bgc:"",mode:""},title:""}},e.handleInput=function(t){var a=e.state.board,n=t.target.value;a.title=n,e.setState({board:a})},e}return Object(l.a)(a,[{key:"onSelectNewBoard",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this.state.board).title){e.next=3;break}return e.abrupt("return");case 3:a.style.bgc=t,this.setState({board:a}),this.props.addBoard(a),this.props.onCloseAddBoardSection();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={colors:["#2e6cb0","#889BC0","#A36890","#F0EFBD"],imgsUrl:["https://res.cloudinary.com/dng1vynbr/image/upload/v1611427008/hearts_j79qmn.jpg","https://res.cloudinary.com/drak3llqt/image/upload/v1610553512/img1_uyzefw.jpg","https://res.cloudinary.com/drak3llqt/image/upload/v1610553514/img4_ohr2cl.png","https://res.cloudinary.com/drak3llqt/image/upload/v1610553508/img3_g44phk.png","https://res.cloudinary.com/drak3llqt/image/upload/v1611479917/KK4bC7ds_vuvzil.jpg","https://res.cloudinary.com/dng1vynbr/image/upload/v1611493508/download_smk3qa.jpg"]},a=this.props.onCloseAddBoardSection;return Object(n.jsx)("section",{className:"add-board-background",children:Object(n.jsxs)("div",{className:"add-new-board",children:[Object(n.jsx)("button",{className:"clear-btn no-growth flex justify-center align-center",onClick:a,children:Object(n.jsx)(ve.a,{})}),Object(n.jsxs)("form",{className:"add-board-form flex align-center justify-center",children:[Object(n.jsx)("label",{className:"add-board-title",children:"Title:"}),Object(n.jsx)("input",{className:"add-board-input",type:"text",name:"",onChange:this.handleInput,id:"",value:this.state.board.title})]}),Object(n.jsxs)("div",{className:" grid",children:[t.colors.map((function(t){return Object(n.jsx)("div",{onClick:function(){return e.onSelectNewBoard(t)},className:"bgc-add-board pointer",style:{backgroundColor:t}},t)})),t.imgsUrl.map((function(t){return Object(n.jsx)("div",{onClick:function(){return e.onSelectNewBoard(t)},className:"add-new-board-img pointer",children:Object(n.jsx)("img",{alt:"",src:t})},t)}))]})]})})}}]),a}(c.Component),Oe={addBoard:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.addBoard(e);case 3:return n=t.sent,a({type:"ADD_BOARD",boardAdded:n}),t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0),console.log("boardActions: err in addBoard",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},xe=Object(b.b)((function(e){return{boards:e.boardModule.boards,loggedInUser:e.userModule.loggedInUser}}),Oe)(fe),ge=a(137),ke=a.n(ge),Ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isAddBoardShow:!1},e.loadBoards=function(){e.props.loadBoards()},e.onShowAddBoardSection=function(){e.setState({isAddBoardShow:!0})},e.onCloseAddBoardSection=function(){e.setState({isAddBoardShow:!1})},e.onRemove=function(t){e.props.removeBoard(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadBoards()}},{key:"render",value:function(){var e=this,t=this.props.boards,a=this.state.isAddBoardShow;return t?Object(n.jsxs)("section",{className:"app-wrapper flex column justify-center align-center",children:[Object(n.jsx)("header",{className:"app-header",children:Object(n.jsx)("h1",{className:"boards-title",children:"Boards"})}),Object(n.jsxs)("div",{className:"template-wrapper",children:[t.map((function(t){return Object(n.jsx)(he,{onRemove:e.onRemove,board:t},t._id)})),Object(n.jsx)("div",{className:"board-preview-card add-board",onClick:this.onShowAddBoardSection,children:Object(n.jsx)(ke.a,{})})]}),Object(n.jsx)("div",{className:"board-preview",children:a&&Object(n.jsx)(xe,{onCloseAddBoardSection:this.onCloseAddBoardSection})})]}):Object(n.jsx)("h1",{children:"Loading...!!"})}}]),a}(c.Component),Se={loadBoards:pe,removeBoard:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{ie.removeBoard(e),a({type:"DELETE_BOARD",boardId:e})}catch(n){console.log("boardActions: err in delete board",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Ne=Object(b.b)((function(e){return{boards:e.boardModule.boards}}),Se)(Ce);function ye(e){var t=e.text;return Object(n.jsxs)("button",{className:"card-details-btn",onClick:function(t){var a=e.name;(0,e.onButtonClick)(a)},children:[Object(n.jsx)("div",{className:"props-icon",children:e.icon}),Object(n.jsx)("span",{className:"props-txt",children:t})]})}var we={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}},Ae=a(262),De=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.users,a=Object(Ae.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}},small:{width:e.spacing(3),height:e.spacing(3)}}}));return Object(n.jsx)("section",{className:"member-row ",children:t.map((function(t){return Object(n.jsxs)("div",{onClick:function(){return e.props.onMemberAdd(t)},className:"avatars flex",children:[Object(n.jsx)(z.a,{src:t.imgUrl,className:a.small}),Object(n.jsx)("h3",{className:"avatar-username",children:t.fullname})]},t._id)}))})}}]),a}(r.a.Component),Be=a(27),Ue=a.n(Be),Pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.boardUsers;return Object(n.jsx)("section",{className:"members-container",children:Object(n.jsxs)("div",{className:"pop-up-members",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:" Members"}),Object(n.jsx)("hr",{}),Object(n.jsx)("input",{autoFocus:!0,placeholder:"Search members",className:"members-input"}),Object(n.jsx)("p",{children:"BOARD MEMBERS"}),Object(n.jsx)(De,{onMemberAdd:this.props.onMemberAdd,users:t})]})})}}]),a}(c.Component),Ie=a(54),Ee=a.n(Ie),Me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e.togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"pop-up-labels",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:"Labels"}),Object(n.jsx)("hr",{}),Object(n.jsx)("input",{autoFocus:!0,placeholder:"Search labels...",className:"label-input"}),Object(n.jsx)("p",{className:"label-title",children:"LABELS"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#87B768")},className:"label-color-pick label-green-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#4677B5")},className:"label-color-pick label-blue-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#AC7ED1")},className:"label-color-pick label-purple-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#E9D661")},className:"label-color-pick label-yellow-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#E6A454")},className:"label-color-pick label-orange-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{onClick:function(){e.props.onLabelColorSelect("#CB6B56")},className:"label-color-pick label-red-label"}),Object(n.jsx)(Ee.a,{className:"edit-icon"}),Object(n.jsx)("button",{className:"pop-up-labels-btn",children:"Create a new label"})]})})}}]),a}(c.Component),Te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={value:"Checklist"},e.togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e.handleInput=function(t){var a=t.target.value;e.setState({value:a})},e.onAdd=function(t){e.props.onCheckListSelect(t),e.props.onCloseCheckListPopUp()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.value;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"pop-up-checklist",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:"Add Checklist"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"pop-up-title",children:"Title"}),Object(n.jsxs)("form",{onSubmit:function(){return e.onAdd(t)},children:[Object(n.jsx)("input",{autoFocus:!0,onChange:this.handleInput,defaultValue:"Checklist",className:"checklist-input"}),Object(n.jsx)("button",{onClick:function(){e.onAdd(t)},className:"save-btn",children:"Add"})]})]})})}}]),a}(c.Component),Re=Object(Ae.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}}}));function _e(e){var t=e.onSetDate,a=Re();return Object(n.jsx)("form",{className:a.container,noValidate:!0,children:Object(n.jsx)(H.a,{onChange:t,id:"datetime-local",type:"datetime-local",defaultValue:"2021-01-23T12:00",className:a.textField,InputLabelProps:{shrink:!0}})})}var Le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={dueDate:""},e.togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e.onSetDate=function(t){var a=t.target.value;e.setState({dueDate:a})},e.onSaveDueDate=function(){(0,e.props.onSetDueDate)(e.state.dueDate),e.togglePopUp()},e.onRemove=function(){(0,e.props.onRemoveDueDate)(),e.togglePopUp()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"pop-up-due-date",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:"Change Due Date"}),Object(n.jsx)("hr",{}),Object(n.jsx)(_e,{onSetDate:this.onSetDate}),Object(n.jsxs)("div",{className:"save-btn-container flex align-center space-between",children:[Object(n.jsx)("button",{className:"save-btn",onClick:this.onSaveDueDate,children:"Save"}),Object(n.jsx)("button",{className:"remove-duedate-btn",onClick:this.onRemove,children:"Remove"})]})]})})}}]),a}(c.Component);function Fe(){return(Fe=Object(m.a)(h.a.mark((function e(t){var a,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dscb3040k",a="https://api.cloudinary.com/v1_1/".concat("dscb3040k","/image/upload"),(n=new FormData).append("file",t.target.files[0]),n.append("upload_preset","zbzfctom"),e.prev=5,e.next=8,fetch(a,{method:"POST",body:n});case 8:return c=e.sent,e.next=11,c.json();case 11:return r=e.sent,console.log(r),e.abrupt("return",Promise.resolve(r));case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var We={uploadImg:function(e){return Fe.apply(this,arguments)}};function qe(e,t,a){return function(n){return ie.saveCard(e,t,a).then((function(e){ue.emit("update board",e),n({type:"UPDATE_BOARD",board:e})}))}}var Ge=a(263),ze=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={card:{},imageUpload:""},e.togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e.upload=function(t){e.setState({imageUpload:"Uploading"}),We.uploadImg(t).then((function(t){var a=e.state.card,n=e.props,c=n.stack,r=n.selectedBoard;a.imgUrl=t.secure_url,e.setState({card:a,imageUpload:""},(function(){e.props.saveCard(a,c,r)}))}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card;this.setState({card:e})}},{key:"render",value:function(){var e=this,t=this.state.imageUpload;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"pop-up-attachments",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:" Attach From..."}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"attach-choice",children:[Object(n.jsx)("input",{id:"file-upload",placeholder:"Computer",onChange:this.upload,type:"file"}),Object(n.jsx)("label",{className:"pointer",htmlFor:"file-upload",children:t?Object(n.jsx)(Ge.a,{}):"Computer"})]}),Object(n.jsx)("p",{className:"attach-choice",children:"Google Drive"}),Object(n.jsx)("p",{className:"attach-choice",children:"DropBox"}),Object(n.jsx)("p",{className:"attach-choice",children:"One Drive"}),Object(n.jsx)("hr",{}),Object(n.jsx)("label",{className:"attach-label",children:"Attach a link"}),Object(n.jsx)("input",{autoFocus:!0,placeholder:"Paste any link here",className:"attach-input"}),Object(n.jsx)("button",{className:"pop-up-attach-btn",children:"Attach"})]})})}}]),a}(c.Component),Je={saveCard:qe},Ve=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),Je)(ze),He=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).togglePopUp=function(t){var a=e.props,n=a.name;(0,a.onButtonClick)(n)},e.onAdd=function(t){e.props.onCoverColorSelect(t),e.props.onCloseCoverPopUp()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"pop-up-cover",children:[Object(n.jsx)(Ue.a,{className:"close-pop-up-btn",onClick:function(t){return e.togglePopUp(t)}}),Object(n.jsx)("p",{className:"pop-up-header",children:"Cover"}),Object(n.jsx)("hr",{}),Object(n.jsx)("label",{className:"color-title",children:"COLORS"}),Object(n.jsxs)("section",{className:"cover-color-container flex",children:[Object(n.jsx)("div",{className:"cover-color cover-green-label",onClick:function(){return e.onAdd("#97BF7C")}}),Object(n.jsx)("div",{className:"cover-color cover-yellow-label",onClick:function(){return e.onAdd("#EEDD6B")}}),Object(n.jsx)("div",{className:"cover-color cover-orange-label",onClick:function(){return e.onAdd("#E9B366")}}),Object(n.jsx)("div",{className:"cover-color cover-red-label",onClick:function(){return e.onAdd("#D2816F")}}),Object(n.jsx)("div",{className:"cover-color cover-purple-label",onClick:function(){return e.onAdd("#BC94DB")}}),Object(n.jsx)("div",{className:"cover-color cover-blue-label",onClick:function(){return e.onAdd("#749BC0")}}),Object(n.jsx)("div",{className:"cover-color cover-light-blue-label",onClick:function(){return e.onAdd("#7DC7DF")}}),Object(n.jsx)("div",{className:"cover-color cover-light-green-label",onClick:function(){return e.onAdd("#9DDCAB")}}),Object(n.jsx)("div",{className:"cover-color cover-pink-label",onClick:function(){return e.onAdd("#E39ACE")}}),Object(n.jsx)("div",{className:"cover-color cover-black-label",onClick:function(){return e.onAdd("#172b4d")}})]})]})})}}]),a}(c.Component),Ke=a(138),Xe=a.n(Ke),Qe=a(139),Ye=a.n(Qe),Ze=a(140),$e=a.n(Ze),et=a(66),tt=a.n(et),at=a(72),nt=a.n(at),ct=a(141),rt=a.n(ct),st=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={memberPopUp:!1,labelPopUp:!1,checklistPopUp:!1,dueDatePopUp:!1,attachmentPopUp:!1,coverPopUp:!1},e.onMemberClick=function(t){var a=!e.state.memberPopUp;e.setState({memberPopUp:a})},e.callBack=function(t){e.state[t]?e.setState(Object(q.a)({},t,!1)):e.setState({memberPopUp:!1,labelPopUp:!1,checklistPopUp:!1,dueDatePopUp:!1,attachmentPopUp:!1,coverPopUp:!1},(function(){e.setState(Object(q.a)({},t,!0))}))},e.onCloseCheckListPopUp=function(){e.setState({checklistPopUp:!1})},e.onCloseCoverPopUp=function(){e.setState({coverPopUp:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.closeListener=we.on("close",(function(){e.setState({memberPopUp:!1,labelPopUp:!1,checklistPopUp:!1,dueDatePopUp:!1,attachmentPopUp:!1,coverPopUp:!1})}))}},{key:"componentWillUnmount",value:function(){this.closeListener()}},{key:"render",value:function(){var e=this.state.memberPopUp,t=this.state.labelPopUp,a=this.state.checklistPopUp,c=this.state.dueDatePopUp,r=this.state.attachmentPopUp,s=this.state.coverPopUp;return Object(n.jsxs)("div",{className:"sidebar-container ",children:[Object(n.jsx)("div",{className:"sidebar-title",children:"ADD TO CARD"}),Object(n.jsxs)("div",{className:"sidebar-btns flex wrap",children:[e&&Object(n.jsx)(Pe,{name:"memberPopUp",onButtonClick:this.callBack,onMemberAdd:this.props.onMemberAdd,boardUsers:this.props.boardUsers}),t&&Object(n.jsx)(Me,{name:"labelPopUp",onButtonClick:this.callBack,onLabelColorSelect:this.props.onLabelColorSelect}),a&&Object(n.jsx)(Te,{name:"checklistPopUp",onButtonClick:this.callBack,onCheckListSelect:this.props.onCheckListSelect,onCloseCheckListPopUp:this.onCloseCheckListPopUp}),c&&Object(n.jsx)(Le,{onSetDueDate:this.props.onSetDueDate,name:"dueDatePopUp",onButtonClick:this.callBack,onRemoveDueDate:this.props.onRemoveDueDate}),r&&Object(n.jsx)(Ve,{name:"attachmentPopUp",onButtonClick:this.callBack,stack:this.props.stack,card:this.props.card}),s&&Object(n.jsx)(He,{name:"coverPopUp",onButtonClick:this.callBack,onCoverColorSelect:this.props.onCoverColorSelect,onCloseCoverPopUp:this.onCloseCoverPopUp}),Object(n.jsx)(ye,{icon:Object(n.jsx)(Xe.a,{}),text:"Members",name:"memberPopUp",onButtonClick:this.callBack}),Object(n.jsx)(ye,{icon:Object(n.jsx)(Ye.a,{}),text:"Labels",name:"labelPopUp",onButtonClick:this.callBack}),Object(n.jsx)(ye,{icon:Object(n.jsx)($e.a,{}),text:"Checklist",name:"checklistPopUp",onButtonClick:this.callBack}),Object(n.jsx)(ye,{icon:Object(n.jsx)(tt.a,{}),text:"Due Date",name:"dueDatePopUp",onButtonClick:this.callBack}),Object(n.jsx)(ye,{icon:Object(n.jsx)(nt.a,{}),text:"Attachment",name:"attachmentPopUp",onButtonClick:this.callBack}),Object(n.jsx)(ye,{icon:Object(n.jsx)(rt.a,{}),text:"Cover",name:"coverPopUp",onButtonClick:this.callBack})]})]})}}]),a}(c.Component),ot=a(86),it=a.n(ot),lt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={card:{}},e.handleInput=function(t){var a=e.state.card;a.desc=t.target.value,e.setState({card:a})},e.saveDesc=function(){(0,e.props.onSaveCard)(e.state.card)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card,t=Object(G.a)({},e);this.setState({card:t})}},{key:"render",value:function(){var e=this.state.card;return Object(n.jsxs)("section",{className:"card-desc-container",children:[Object(n.jsxs)("div",{className:"card-desc-title",children:[Object(n.jsx)(it.a,{className:"desc-icon"}),Object(n.jsx)("h3",{className:"card-desc-words",children:"Description"})]}),Object(n.jsxs)("div",{className:"card-desc-textarea",children:[Object(n.jsx)("textarea",{className:"cd-textarea",placeholder:"Add a more detailed description...",value:e.desc,rows:"4",cols:"50",onChange:this.handleInput}),Object(n.jsx)("button",{className:"save-btn",onClick:this.saveDesc,children:"Save"})]})]})}}]),a}(c.Component),dt=a(142),ut=a.n(dt),pt=(a(222),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={comment:"",isActivitySelected:!1},e.handleChange=function(t){var a=e.state.comment;a=t.target.value,e.setState({comment:a})},e.onEditActivity=function(){e.state.isActivitySelected?e.setState({isActivitySelected:!1}):e.setState({isActivitySelected:!0})},e.convertToDate=function(e){var t=new Date(e).toLocaleString().split("/"),a=t[0],n=t[1],c=t[2];return"".concat(a,"/").concat(n,"/").concat(c)},e.onCommentSave=function(){(0,e.props.onCommentAdd)(e.state.comment);e.setState({comment:""})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({comment:this.props.comment})}},{key:"render",value:function(){var e=this,t=this.props.card,a=this.state.comment;return Object(n.jsxs)("section",{className:"cd-cmp flex column",children:[Object(n.jsxs)("div",{className:"card-act-title",children:[Object(n.jsx)(ut.a,{className:"act-icon"}),Object(n.jsx)("h3",{className:"cd-subtitle-words",children:"Activity"})]}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"cd-subtitle-txt",children:[Object(n.jsx)("div",{className:"card-act-textarea",children:Object(n.jsx)("textarea",{onChange:this.handleChange,className:"act-textarea",value:a,placeholder:"Write a comment..."})}),Object(n.jsx)("div",{className:"act-original-save flex space-between align-center",children:Object(n.jsx)("button",{className:"save-btn",onClick:this.onCommentSave,children:"Save"})})]})}),t.comments.map((function(t){var a=t.createdBy?t.createdBy.fullname:"",c=a.substring(0,1)+a.charAt(a.indexOf(" ")+1),r=e.convertToDate(t.createdAt);return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"card-activity-container flex",children:[c.length?Object(n.jsx)(z.a,{size:"10",children:c}):Object(n.jsx)(z.a,{size:"10",src:"frontend/src/assets/imgs/avatar-person.svg"}),Object(n.jsxs)("div",{className:"card-activity-row",children:[Object(n.jsx)("input",{className:"card-details-activity-textarea",onClick:e.onEditActivity,onChange:e.handleChange,value:t.txt}),Object(n.jsx)("div",{className:"card-activity-date",children:r})]})]})},t.id)}))]})}}]),a}(c.Component)),bt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.labels;return Object(n.jsx)("section",{children:Object(n.jsx)("div",{children:e.map((function(e,t){return Object(n.jsx)("button",{className:"card-label-preview",style:{background:"".concat(e)}},t)}))})})}}]),a}(c.Component),jt=a(73),ht=a.n(jt);function mt(e){var t=e.todo,a=e.onRemoveTodo,c=e.checklist,r=e.handleCheckboxTodo;return Object(n.jsxs)("div",{className:"todo-row flex space-between",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{className:"todo-input",checked:t.isDone?"checked":"",onChange:function(){return r(t.id,c)},type:"checkbox"}),Object(n.jsx)("span",{className:t.isDone?"todo-done todo-txt":"todo-txt",children:t.txt})]}),Object(n.jsx)(ht.a,{onClick:function(){return a(t.id,c)},className:"todo-delete-icon"})]},t.id)}var vt=a(143),ft=a.n(vt),Ot=a(264);function xt(e){return Object(n.jsxs)(Q.a,{display:"flex",alignItems:"center",children:[Object(n.jsx)(Q.a,{minWidth:35,children:Object(n.jsx)($.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})}),Object(n.jsx)(Q.a,{width:"100%",mr:1,children:Object(n.jsx)(Ot.a,Object(G.a)({variant:"determinate"},e))})]})}var gt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isAddItemShow:!1},e.calcTodosForPrograss=function(){var t=e.props.checklist,a=t.todos.reduce((function(e,t){return t.isDone&&e++,e}),0)/t.todos.length*100;return a||0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromEventBus=we.on("closeAddSection",(function(t){return e.setState({isAddItemShow:!1})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromEventBus()}},{key:"toggleAddItem",value:function(){var e=this.state.isAddItemShow;e=!e,this.setState({isAddItemShow:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.checklist,c=t.onRemoveTodo,r=t.handleInput,s=t.addTodo,o=t.handleCheckboxTodo;return Object(n.jsx)("section",{className:"checklist flex column",children:Object(n.jsxs)("div",{className:"flex space-between column",children:[Object(n.jsxs)("div",{className:"cl-subtitle ",children:[Object(n.jsx)(ft.a,{className:"checklist-icon"}),Object(n.jsxs)("div",{className:"cl-inner-span flex space-between",children:[Object(n.jsx)("h3",{className:"cl-subtitle-txt flex align-center",children:a.title}),Object(n.jsx)("button",{className:"checklist-del-btn",onClick:function(){e.props.onRemove(a.id)},children:"Delete"})]})]}),Object(n.jsx)(xt,{value:this.calcTodosForPrograss()}),a.todos.map((function(e){return Object(n.jsx)(mt,{todo:e,checklist:a,onRemoveTodo:c,handleCheckboxTodo:o},e.id)})),this.state.isAddItemShow&&Object(n.jsxs)("div",{className:"flex add-todo-container",children:[Object(n.jsx)("input",{class:"add-todo-input",onChange:r,placeholder:"Add an item"}),Object(n.jsx)("button",{className:"add-todo-btn",onClick:function(){return s(a)},children:"Add"})]}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)("button",{className:"checklist-add",onClick:function(){return e.toggleAddItem()},children:"Add an Item"})})]})},a.id)}}]),a}(c.Component),kt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={newTodo:"",todos:[],closeAddTodoSection:!1},e.handleInput=function(t){var a=e.state.newTodo;a=t.target.value,e.setState({newTodo:a})},e.addTodo=function(t){t.todos.push({id:re.makeId(),txt:e.state.newTodo,isDone:!1,createdAt:Date.now()}),e.setState({todos:t.todos}),e.props.updateChecklist(t),we.emit("closeAddSection",!1)},e.handleCheckboxTodo=function(t,a){var n=Object.assign({},a),c=n.todos.find((function(e){return e.id===t}));c.isDone=!c.isDone;var r=n.todos.map((function(e){return e.id===c.id?c:e}));e.props.updateChecklist(r)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=[];this.props.checklists.map((function(t){e.push(t)})),this.setState({todos:e})}},{key:"render",value:function(){var e=this,t=this.props.checklists;return Object(n.jsx)("div",{children:t.map((function(t){return Object(n.jsx)(gt,{handleCheckboxTodo:e.handleCheckboxTodo,checklist:t,onRemoveTodo:e.props.onRemoveTodo,handleInput:e.handleInput,addTodo:e.addTodo,onRemove:e.props.onRemove},t.id)}))})}}]),a}(c.Component),Ct=Object(Ae.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(7),height:e.spacing(7)}}}));function St(e){var t=e.users,a=Ct();return Object(n.jsx)("section",{className:"members-avatar-cont flex pointer",children:t.map((function(e){return Object(n.jsx)("div",{className:"avatar-cont",children:Object(n.jsx)(z.a,{className:a.small,size:"10",src:e.imgUrl})},e._id)}))})}function Nt(e){var t=e.card,a=e.onRemoveImage;return Object(n.jsxs)("section",{children:[Object(n.jsxs)("div",{className:"card-att-title flex",children:[Object(n.jsx)(nt.a,{className:"att-icon"}),Object(n.jsx)("h3",{className:"cd-subtitle-words",children:"Attachments"})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)("img",{className:"cd-img",src:t.imgUrl,alt:""}),Object(n.jsxs)("div",{className:"flex column",children:[Object(n.jsx)("p",{className:"img-name",children:t.imgUrl}),Object(n.jsx)("button",{className:"attachment-del-btn",onClick:function(){return a(t)},children:"Delete"})]})]})]})}var yt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={card:{comments:[],labels:[],checklists:[],coverColor:"",members:[],dueDate:""},boardUsers:[],loggedUser:{}},e.onMemberAdd=function(t){var a=e.state.card,n=e.state.loggedUser,c=a.members.findIndex((function(e){return e._id===t._id}));-1===c?(a.members.push(t),a.comments.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(n.fullname," added ").concat(t.fullname," to this card")})):(a.comments.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(n.fullname," removed ").concat(t.fullname," from this card")}),a.members.splice(c,1)),e.setState({card:a},(function(){e.props.saveCard(e.state.card,e.props.stack,e.props.selectedBoard)}))},e.setLabelOnCard=function(t){var a=e.state.card,n=a.comments,c=a.labels.findIndex((function(e){return e===t}));-1===c?(n.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," added card label color")}),a.labels.push(t)):(n.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," removed card label color")}),a.labels.splice(c,1)),e.setState({card:a,comments:n},(function(){console.log("this.state.card is:",e.state.card),e.props.saveCard(e.state.card,e.props.stack,e.props.selectedBoard)}))},e.setCardColor=function(t){var a=e.state.card,n=a.comments;a.coverColor===t?(n.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," removed card cover color")}),a.coverColor=""):(n.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," added card cover color")}),a.coverColor=t),e.setState({card:a,comments:n},(function(){e.props.saveCard(e.state.card,e.props.stack,e.props.selectedBoard)}))},e.addChecklist=function(t){var a=e.state.card,n=a.comments,c={id:re.makeId(),title:t,todos:[],createdAt:Date.now()};n.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," added checklist - ").concat(t)}),a.checklists.push(c),e.setState({card:a})},e.updateChecklist=function(t){var a=e.state.card,n=a.checklists.map((function(e){return e.id===t.id?t:e}));a.checklists=n,e.props.saveCard(a,e.props.stack,e.props.selectedBoard)},e.onRemoveTodo=function(t,a){var n=e.state.card,c=Object(G.a)({},a),r=c.todos.filter((function(e){return e.id!==t}));c.todos=r;var s=n.checklists.map((function(e){return e.id===c.id?c:e}));n.checklists=s,e.props.saveCard(n,e.props.stack,e.props.selectedBoard)},e.onClosePopUps=function(){},e.deleteChecklist=function(t){var a=e.state.card,n=e.props,c=n.stack,r=n.selectedBoard,s=a.comments,o=a.checklists.findIndex((function(e){return e.id===t})),i=a.checklists[o].title;a.checklists.splice(o,1),s.unshift({id:re.makeId(),createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," deleted checklist - ").concat(i)}),e.setState({card:a}),e.props.saveCard(a,c,r)},e.addComment=function(t){var a=e.state.card;a.comments.unshift({id:re.makeId(),createdBy:e.state.loggedUser,createdAt:Date.now(),txt:"".concat(e.state.loggedUser.fullname," added comment - ").concat(t)}),e.setState({card:a})},e.onRemoveImage=function(t){var a=e.props,n=a.stack,c=a.selectedBoard;console.log("Remove IMG");var r=Object(G.a)({},t);r.imgUrl="",console.log(r),e.props.saveCard(r,n,c)},e.onSetDueDate=function(t){var a=e.props,n=a.stack,c=a.selectedBoard,r=e.state.card;r.dueDate=t,e.setState({card:r},(function(){e.props.saveCard(r,n,c)}))},e.onRemoveDueDate=function(){var t=e.props,a=t.stack,n=t.selectedBoard,c=e.state.card;c.dueDate="",e.setState({card:c},(function(){e.props.saveCard(c,a,n)}))},e.onSaveCard=function(t){var a=e.props,n=a.stack,c=a.selectedBoard;e.props.saveCard(t,n,c)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card,t=this.props.selectedBoard.members,a=A.getLoggedinUser();a||(a={fullname:"Guest"}),this.setState({loggedUser:a,card:e,boardUsers:t})}},{key:"render",value:function(){var e=this.props,t=e.card,a=e.onCloseModal,c=e.stack,r=this.state.card.checklists,s=this.state.card.labels,o=this.state.card.members,i=re.formatTime(t,"dateTime");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"modal-bg",onClick:function(e){return a(e)}}),Object(n.jsx)("main",{children:Object(n.jsxs)("section",{onClick:this.onClosePopUps,className:"card-details-container",children:[Object(n.jsx)("div",{className:"card-details-cover",style:{background:"".concat(this.state.card.coverColor)},children:Object(n.jsx)(Ue.a,{className:"close-cd",onClick:function(e){return a(e)}})}),Object(n.jsxs)("div",{className:"card-details-body",children:[Object(n.jsxs)("div",{className:"card-details-top",children:[Object(n.jsx)("h2",{className:"card-details-title",children:t.title}),Object(n.jsxs)("p",{className:"card-details-list",children:["in list ",Object(n.jsx)("span",{className:"list-fake-link",children:c.title})]})]}),Object(n.jsxs)("div",{className:"details-list-container flex",children:[Object(n.jsxs)("div",{className:"column-container flex column",children:[0!==s.length&&Object(n.jsx)(bt,{className:"labels-txt",labels:s}),i&&Object(n.jsx)("div",{children:Object(n.jsxs)("p",{className:"details-due-date",children:[Object(n.jsx)("span",{children:Object(n.jsx)(tt.a,{})}),i]})}),0!==o.length&&Object(n.jsx)(St,{users:o,className:"details-members"}),Object(n.jsx)(lt,{onSaveCard:this.onSaveCard,card:t}),t.imgUrl&&Object(n.jsx)(Nt,{onRemoveImage:this.onRemoveImage,card:t}),0!==r.length&&Object(n.jsx)(kt,{updateChecklist:this.updateChecklist,onRemoveTodo:this.onRemoveTodo,onRemove:this.deleteChecklist,checklists:r})]}),Object(n.jsx)("div",{className:"sidebar-wrapper flex column",children:Object(n.jsx)(st,{onSetDueDate:this.onSetDueDate,onRemoveDueDate:this.onRemoveDueDate,card:t,stack:c,onMemberAdd:this.onMemberAdd,boardUsers:this.state.boardUsers,onCheckListSelect:this.addChecklist,onCoverColorSelect:this.setCardColor,onLabelColorSelect:this.setLabelOnCard})}),Object(n.jsx)("div",{className:"column-container flex column",children:Object(n.jsx)(pt,{card:t,onCommentAdd:this.addComment})})]})]})]})})]})}}]),a}(c.Component),wt={saveCard:qe,loadUsers:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"LOADING_START"}),e.next=4,A.getUsers();case 4:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 11:return e.prev=11,t({type:"LOADING_DONE"}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()}},At=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,users:e.userModule.users}}),wt)(yt),Dt=a(145),Bt=a.n(Dt),Ut=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={card:{title:""}},e.handleInput=function(t){var a=e.state.card;a.title=t.target.value,e.setState({card:a})},e.onSave=function(t){t.stopPropagation();var a=e.state.card;a.title&&(0,e.props.saveEditedCard)(a)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card,t=Object(G.a)({},e);this.setState({card:t})}},{key:"render",value:function(){var e=this,t=this.state.card.title;return Object(n.jsx)("div",{className:"card-preview-edit-card",children:Object(n.jsxs)("form",{action:"",onSubmit:function(t){return e.onSave(t)},children:[Object(n.jsx)("input",{onBlur:this.onSave,type:"text",onChange:this.handleInput,value:t}),Object(n.jsx)("button",{type:"submit",onClick:this.onSave,children:"Save"})]})})}}]),a}(c.Component),Pt=a(46),It=a(144),Et=a.n(It),Mt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isCardDetailsSelected:!1,isEditCardModalShow:!1,card:{},labels:[]},e.onShowCardDetails=function(){e.props.disableStackDrag(),e.state.isEditCardModalShow||e.setState({isCardDetailsSelected:!0})},e.closeModal=function(t){e.props.allowStackDrag(),t.stopPropagation(),e.setState({isCardDetailsSelected:!1})},e.onRemoveCard=function(t){var a=e.props,n=a.selectedBoard,c=a.stack;e.props.removeCard(t,c,n)},e.onEditCard=function(t){t.stopPropagation(),e.setState({isEditCardModalShow:!0})},e.onSaveEditedCard=function(t){var a=e.props,n=a.selectedBoard,c=a.stack;e.props.saveCard(t,c,n),e.setState({isEditCardModalShow:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card,t=this.props.card.labels;this.setState({card:e,labels:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.card,c=t.stack,r=t.index,s=re.calcDoneTodos(a),o=re.formatTime(a),i=this.props.card,l=i.coverColor,d=i.labels,u=this.state,p=u.isCardDetailsSelected,b=u.isEditCardModalShow;return a&&c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Pt.b,{draggableId:a.id,index:r,children:function(t){return Object(n.jsxs)("div",Object(G.a)(Object(G.a)(Object(G.a)({onClick:e.onShowCardDetails,className:"card-preview"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:[a.imgUrl?Object(n.jsx)("img",{src:a.imgUrl,alt:""}):Object(n.jsx)("div",{className:"card-preview-color",style:{background:"".concat(l)}}),0!==d.length&&Object(n.jsx)(bt,{labels:d}),Object(n.jsx)("div",{className:"card-preview-line flex space-between",children:b?Object(n.jsx)(Ut,{saveEditedCard:e.onSaveEditedCard,card:a}):Object(n.jsxs)("div",{className:"card-preview-icons",children:[Object(n.jsx)("div",{children:a.title}),Object(n.jsxs)("div",{className:"card-preview-bottom flex space-between",children:[Object(n.jsxs)("div",{className:"card-preview-summary-icons",children:[a.desc&&Object(n.jsx)("div",{className:"icon-preview",children:Object(n.jsx)(it.a,{className:"icons"})}),0!==s.length&&Object(n.jsxs)("div",{className:"icon-preview",children:[Object(n.jsx)(Et.a,{className:"icons"}),s.done,"/",s.length]}),a.dueDate&&Object(n.jsxs)("div",{className:"icon-preview",children:[Object(n.jsx)(tt.a,{className:"icons"})," ",o]})]}),Object(n.jsxs)("div",{className:"icons-container flex",children:[Object(n.jsx)("div",{onClick:e.onEditCard,children:Object(n.jsx)("span",{children:Object(n.jsx)(Bt.a,{className:"card-preview-edit-icon"})})}),Object(n.jsx)("div",{onClick:function(){return e.onRemoveCard(a.id)},children:Object(n.jsx)("span",{children:Object(n.jsx)(ht.a,{className:"card-preview-edit-icon"})})})]})]})]})}),Object(n.jsx)("div",{className:"preview-members flex",children:0!==a.members.length&&Object(n.jsx)(St,{users:a.members})})]}))}}),p&&Object(n.jsx)(At,{stack:c,card:a,onCloseModal:this.closeModal})]}):Object(n.jsx)("h1",{children:"loading.."})}}]),a}(c.Component),Tt={removeCard:function(e,t,a){return function(n){return ie.removeCard(e,t,a).then((function(e){ue.emit("update board",e),console.log(e),n({type:"UPDATE_BOARD",board:e})}))}},saveCard:qe},Rt=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,boards:e.boardModule.boards}}),Tt)(Mt),_t=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.cards,a=e.allowStackDrag,c=e.disableStackDrag,r=e.stack;return Object(n.jsx)(Pt.c,{droppableId:r.id,type:"card",children:function(e){return Object(n.jsxs)("div",Object(G.a)(Object(G.a)({className:"stack-drop",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(n.jsx)(Rt,{allowStackDrag:a,disableStackDrag:c,index:t,stack:r,card:e},e.id)})),e.placeholder]}))}})}}]),a}(c.Component);var Lt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={stack:{title:""}},e.handleInput=function(t){var a=e.state.stack;a.title=t.target.value,e.setState({stack:a})},e.onSaveStack=function(){var t=e.state.stack;t.title&&e.props.saveStack(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.stack,t=Object(G.a)({},e);this.setState({stack:t})}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"edit-stack",children:Object(n.jsx)("form",{action:"",onSubmit:this.onSaveStack,children:Object(n.jsx)("input",{onBlur:this.onSaveStack,type:"text",autoFocus:!0,onChange:this.handleInput,value:this.state.stack.title,name:"",id:""})})})}}]),a}(c.Component),Ft=a(87),Wt=a.n(Ft),qt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={card:{title:""}},e.handleInput=function(t){var a=e.state.card;a.title=t.target.value,e.setState({card:a})},e.onAdd=function(){if(e.state.card.title){var t=e.state.card;e.props.addNewCard(t)}},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("section",{className:"add-card-modal flex column",children:Object(n.jsxs)("form",{onSubmit:this.onAdd,children:[Object(n.jsx)("div",{className:"add-card-input",children:Object(n.jsx)("input",{autoFocus:!0,onBlur:this.onAdd,type:"text",onChange:this.handleInput,value:this.state.card.title})}),Object(n.jsxs)("div",{className:"add-btn-container flex align-center",children:[Object(n.jsx)("button",{className:"save-btn",onClick:this.onAdd,children:"Add Card"}),Object(n.jsx)("button",{className:"clear-btn",onClick:this.props.closeAddSection,children:Object(n.jsx)(ve.a,{})})]})]})})}}]),a}(c.Component),Gt=a(146),zt=a.n(Gt);function Jt(e){var t=e.onCloseMenuModal,a=e.onRemoveStack;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"bg-modal-stack",onClick:t}),Object(n.jsxs)("div",{className:"stack-menu-modal",children:[Object(n.jsxs)("div",{className:"stack-menu-header",children:[Object(n.jsx)("span",{className:"title-stack",children:"List Actions"}),Object(n.jsx)("span",{className:"close-menu-btn",onClick:t,children:Object(n.jsx)(Ue.a,{})})]}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Add Card..."}),Object(n.jsx)("li",{children:"Copy List..."}),Object(n.jsx)("li",{children:"Move List..."}),Object(n.jsx)("li",{className:"pointer",onClick:a,children:"Archive This List"})]})]})]})}var Vt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isEditShow:!1,isAddShow:!1,dragEnable:!0,isOpenStackMenu:!1},e.disableStackDrag=function(){e.setState({dragEnable:!1})},e.allowStackDrag=function(){e.setState({dragEnable:!0})},e.onRemoveStack=function(){var t=e.props,a=t.stack,n=t.selectedBoard;(0,t.removeStack)(a.id,n._id,n),e.onCloseMenuModal()},e.onEdit=function(){e.setState({isEditShow:!0})},e.onSaveStack=function(t){var a=e.props.selectedBoard;console.log("selectedBoard is:",e.props.selectedBoard),e.props.saveStack(t,a),e.setState({isEditShow:!1})},e.onAddCard=function(){e.setState({isAddShow:!0})},e.onCloseAddSection=function(){e.setState({isAddShow:!1})},e.onAddNewCard=function(t){var a=e.props,n=a.stack,c=a.selectedBoard;e.onCloseAddSection(),e.props.addCard(t,n,c)},e.onDragDis=function(){return!0},e.onToogleStackMenu=function(){var t=e.state.isOpenStackMenu;t=!t,e.setState({isOpenStackMenu:t})},e.onCloseMenuModal=function(){e.setState({isOpenStackMenu:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.stack,a=this.state,c=a.dragEnable,r=a.isOpenStackMenu;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Pt.b,{isDragDisabled:!1===c,draggableId:t.id,index:this.props.index,children:function(a){return Object(n.jsxs)("div",Object(G.a)(Object(G.a)(Object(G.a)({},a.draggableProps),{},{ref:a.innerRef},a.dragHandleProps),{},{className:"stack-preview-card card-list",children:[Object(n.jsx)("div",{className:"stack-title flex",children:e.state.isEditShow?Object(n.jsx)(Lt,{className:"stack-preview-edit flex",saveStack:e.onSaveStack,stack:t}):Object(n.jsxs)("div",{className:"flex space-between align-center width100",children:[Object(n.jsx)("h4",{onClick:e.onEdit,className:"stack-title-words",children:t.title}),r&&Object(n.jsx)(Jt,{onRemoveStack:e.onRemoveStack,onCloseMenuModal:e.onCloseMenuModal}),Object(n.jsx)(zt.a,{onClick:e.onToogleStackMenu,className:"stack-3dots-menu"})]})}),Object(n.jsx)(_t,{allowStackDrag:e.allowStackDrag,disableStackDrag:e.disableStackDrag,stack:t,cards:t.cards}),e.state.isAddShow?Object(n.jsx)(qt,{addNewCard:e.onAddNewCard,closeAddSection:e.onCloseAddSection}):Object(n.jsxs)("div",{onClick:e.onAddCard,className:"add-new-card flex align-center",children:[Object(n.jsx)("div",{className:"add-icon flex justify-center align-center",children:Object(n.jsx)(Wt.a,{})}),Object(n.jsx)("span",{className:"add-text flex justify-center align-center",children:"Add Another Card"})]})]}))}})})}}]),a}(c.Component),Ht={removeStack:function(e,t,a){return function(n){return ie.removeStack(e,t,a).then((function(e){ue.emit("update board",e),n({type:"UPDATE_BOARD",board:e})}))}},setSelectedBoard:be,saveStack:function(e,t){return function(a){return ie.saveStack(e,t).then((function(e){ue.emit("update board",e),a({type:"UPDATE_BOARD",board:e})}))}},addCard:function(e,t,a){return function(n){return ie.addCard(e,t,a).then((function(e){ue.emit("update board",e),n({type:"UPDATE_BOARD",board:e})}))}},updateBoard:je},Kt=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,boards:e.boardModule.boards}}),Ht)(Vt),Xt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).dragEnd=function(t){var a=e.props,n=a.selectedBoard,c=a.moveStack,r=e.props.selectedBoard.stacks,s=t.destination,o=t.source,i=t.type;s&&(s.droppableId===o.droppableId&&s.index===o.index||("card"===i?(t.destination.droppableId===t.source.droppableId&&e.props.updateDragCard(t,r,n),t.destination.droppableId!==t.source.droppableId&&e.props.updateDragCardToOtherList(t,r,n)):c(t,r,n)))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.board.stacks?Object(n.jsx)("div",{children:Object(n.jsx)(Pt.a,{onDragEnd:this.dragEnd,children:Object(n.jsx)(Pt.c,{droppableId:"all stacks",direction:"horizontal",type:"column",children:function(t){return Object(n.jsxs)("div",Object(G.a)(Object(G.a)({},t.droppableProps),{},{ref:t.innerRef,className:"stack-list-container flex ",children:[e.props.board.stacks.map((function(t,a){return Object(n.jsx)(Kt,{index:a,boardId:e.props.boardId,stack:t},t.id)})),t.placeholder]}))}})})}):Object(n.jsx)(Ge.a,{})}}]),a}(c.Component),Qt={updateDragCard:function(e,t,a){return function(n){return ie.updateDragCard(e,t,a).then((function(e){ue.emit("update board",e),n({type:"UPDATE_BOARD",board:e})}))}},updateDragCardToOtherList:function(e,t,a){return function(n){return ie.updateDragCardToOtherList(e,t,a).then((function(e){ue.emit("update board",e),n({type:"UPDATE_BOARD",board:e})}))}},moveStack:function(e,t,a){return function(){var n=Object(m.a)(h.a.mark((function n(c){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ie.moveStack(e,t,a);case 3:r=n.sent,ue.emit("update board",r),c({type:"UPDATE_BOARD",board:r}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("stackActions: err in updateBoard",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}},Yt=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),Qt)(Xt),Zt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={stack:{cards:[],style:{},title:""}},e.handleInput=function(t){var a=e.state.stack;a.title=t.target.value,e.setState({stack:a})},e.onAdd=function(t,a){(t.stopPropagation(),a.title)&&(0,e.props.addNewStack)(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.closeAddSection,a=this.state.stack;return Object(n.jsx)("section",{className:"add-stack-modal flex column",children:Object(n.jsxs)("form",{onClick:function(t){return e.onAdd(t,a)},children:[Object(n.jsx)("div",{className:"add-stack-input",children:Object(n.jsx)("input",{autoFocus:!0,onChange:this.handleInput,type:"text",name:"",id:"",placeholder:"Title ?",onBlur:this.props.onCloseAddSection})}),Object(n.jsxs)("div",{className:"add-stack-container flex align-center",children:[Object(n.jsx)("button",{className:"save-btn",onClick:function(t){return e.onAdd(t,a)},children:"Add List"}),Object(n.jsx)("button",{className:"clear-btn",onClick:t,children:Object(n.jsx)(ve.a,{})})]})]})})}}]),a}(c.Component),$t=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={selectedBoard:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedBoard;this.setState({selectedBoard:e})}},{key:"render",value:function(){var e=this.props.selectedBoard,t="";return e?(e.members&&(t=e.members),Object(n.jsx)("section",{children:Object(n.jsxs)("div",{className:"status-bar-container flex space-between align-center",children:[Object(n.jsxs)("div",{className:"flex align-center",children:[Object(n.jsx)("h2",{style:{color:"white"},className:"status-board-title",children:e.title}),0!==t.length&&Object(n.jsx)(St,{users:e.members})]}),Object(n.jsx)("button",{className:"btn1 diff-bgc",onClick:this.onMenuSelect,children:Object(n.jsx)("span",{className:"btn1-span",children:"Show Menu"})})]})})):Object(n.jsx)("h5",{children:"Loading..."})}}]),a}(r.a.Component),ea=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard}}),{})($t),ta=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={isAddStack:!1},e.handleUpdateBoard=function(t){e.props.updateBoard(t)},e.onAddSection=function(){e.setState({isAddStack:!0})},e.onCloseAddSection=function(){e.setState({isAddStack:!1})},e.onAddNewStack=function(t){var a=e.props.selectedBoard;e.props.addStack(t,a).then((function(){return e.setState({isAddStack:!1})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadBoard(),ue.setup(),ue.emit("join board",this.props.match.params.id),ue.on("update board",this.handleUpdateBoard)}},{key:"componentWillUnmount",value:function(){ue.terminate()}},{key:"loadBoard",value:function(){var e=this.props.match.params.id;this.props.setSelectedBoard(e)}},{key:"render",value:function(){var e=this.props.selectedBoard,t={backgroundColor:"white"};if(!e)return Object(n.jsx)(Ge.a,{});if(e.style){var a=e.style.bgc;t=a.startsWith("#")?{backgroundColor:a}:{backgroundImage:"url(".concat(a,")")}}return Object(n.jsxs)("section",{className:"board-container",style:t,children:[Object(n.jsx)(ea,{}),Object(n.jsx)("div",{className:"board-inner mt flex column",children:Object(n.jsxs)("div",{className:"stack-container flex ",children:[e&&Object(n.jsx)(Yt,{board:e}),Object(n.jsxs)("div",{className:"add-new-stack",children:[Object(n.jsxs)("button",{className:"board-open-modal-btn",onClick:this.onAddSection,children:[Object(n.jsx)("span",{className:"board-icon",children:Object(n.jsx)(Wt.a,{})}),Object(n.jsx)("span",{className:"btn1-span",children:"Add another list"})]}),this.state.isAddStack&&Object(n.jsx)(Zt,{addNewStack:this.onAddNewStack,closeAddSection:this.onCloseAddSection})]})]})})]})}}]),a}(c.Component),aa={setSelectedBoard:be,addStack:function(e,t){return function(a){return ie.saveNewStack(e,t).then((function(e){ue.emit("update board",e),a({type:"UPDATE_BOARD",board:e})}))}},updateBoard:je},na=Object(b.b)((function(e){return{selectedBoard:e.boardModule.selectedBoard,boards:e.boardModule.boards}}),aa)(ta);var ca=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={user:{firstname:"",lastname:"",username:"",password:"",isGuest:!1,cards:[],imgUrl:""},msg:""},e.handleInput=function(t){t.preventDefault();var a=e.state.user,n=t.target.name,c=t.target.value;a[n]=c,e.setState({user:a})},e.onSubmit=function(t){t.preventDefault();var a=e.state.user,n=a.firstname+" "+a.lastname;delete a.firstname,delete a.lastname,a.fullname=n;var c=a.username,r=a.password;if(!c||!r||!n)return e.setState({msg:"All inputs are required"},(function(){return console.log(e.state.msg)}));e.props.signup(a).then((function(){return e.props.history.push("/cardly")}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=Object(Ae.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));return Object(n.jsx)("div",{className:"main-signup",children:Object(n.jsxs)(ee.a,{component:"main",maxWidth:"xs",children:[Object(n.jsx)(V.a,{}),Object(n.jsxs)("div",{className:"flex column center",children:[Object(n.jsx)(z.a,{className:e.avatar,children:Object(n.jsx)(Z.a,{})}),Object(n.jsx)($.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(n.jsxs)("form",{className:e.form,onSubmit:this.onSubmit,noValidate:!0,children:[Object(n.jsxs)(X.a,{container:!0,spacing:2,children:[Object(n.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(H.a,{autoComplete:"fname",name:"firstname",variant:"outlined",required:!0,fullWidth:!0,id:"firstname",label:"First Name",autoFocus:!0,onChange:this.handleInput})}),Object(n.jsx)(X.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)(H.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastname",label:"Last Name",name:"lastname",autoComplete:"lname",onChange:this.handleInput})}),Object(n.jsx)(X.a,{item:!0,xs:12,children:Object(n.jsx)(H.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"username",name:"username",autoComplete:"username",onChange:this.handleInput})}),Object(n.jsxs)(X.a,{item:!0,xs:12,children:[Object(n.jsx)(H.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handleInput}),this.state.msg&&Object(n.jsx)("label",{children:this.state.msg})]})]}),Object(n.jsx)(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),Object(n.jsx)(X.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(X.a,{item:!0,children:Object(n.jsx)(K.a,{href:"#/login",variant:"body2",children:"Already have an account? Log in"})})})]})]}),Object(n.jsx)(Q.a,{mt:5})]})})}}]),a}(c.Component),ra={signup:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},sa=Object(b.b)((function(e){return{}}),ra)(ca),oa=[{path:"/Cardly/:id",component:na},{path:"/Cardly/card/:id?",component:At},{path:"/Cardly",component:Ne},{path:"/login",component:ne},{path:"/signup",component:sa},{path:"/about",component:function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"About"})})}},{path:"/",component:function(){return Object(n.jsx)("section",{className:"hero",children:Object(n.jsx)("div",{className:"home-container",children:Object(n.jsxs)("div",{className:"home-content",children:[Object(n.jsxs)("div",{className:"home-words",children:[Object(n.jsx)("h1",{children:"Cardly"}),Object(n.jsx)("p",{className:"p1",children:"Get your work organized just how you like it."})]}),Object(n.jsx)("div",{className:"home-img",children:Object(n.jsx)("img",{src:"https://res.cloudinary.com/drak3llqt/image/upload/v1611398666/undraw_teamwork_hpdk_qoijno.svg",className:"cardly-img",alt:""})}),Object(n.jsx)("div",{className:"btn",children:Object(n.jsx)(p.b,{to:"/Cardly",children:Object(n.jsx)("button",{className:"home-btn",children:"Get Started"})})})]})})})}}],ia=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).loadBoards=function(){e.props.loadBoards()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadBoards()}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(F,{}),Object(n.jsx)(W.c,{children:oa.map((function(e){return Object(n.jsx)(W.a,{exact:!0,component:e.component,path:e.path},e.path)}))})]})}}]),a}(c.Component),la={loadBoards:pe},da=Object(b.b)((function(e){return{boards:e.boardModule.boards}}),la)(ia);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ua=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,270)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},pa=a(147),ba=a(33),ja={boards:[],selectedBoard:{}};var ha=null;sessionStorage.loggedinUser&&(ha=JSON.parse(sessionStorage.loggedinUser));var ma={loggedInUser:ha,users:[]};var va=Object(ba.c)({boardModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(G.a)(Object(G.a)({},e),{},{boards:t.boards});case"ADD_BOARD":return Object(G.a)(Object(G.a)({},e),{},{boards:[].concat(Object(ce.a)(e.boards),[t.boardAdded]),selectedBoard:t.boardAdded});case"SET_BOARD":return Object(G.a)(Object(G.a)({},e),{},{selectedBoard:t.board});case"DELETE_BOARD":return Object(G.a)(Object(G.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"UPDATE_BOARD":return Object(G.a)(Object(G.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e})),selectedBoard:t.board});default:return e}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(G.a)(Object(G.a)({},e),{},{loggedInUser:t.user});case"REMOVE_USER":return Object(G.a)(Object(G.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(G.a)(Object(G.a)({},e),{},{users:t.users});default:return e}}}),fa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ba.d,Oa=Object(ba.e)(va,fa(Object(ba.a)(pa.a)));o.a.render(Object(n.jsx)(b.a,{store:Oa,children:Object(n.jsx)(p.a,{children:Object(n.jsx)(da,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ua()}},[[221,1,2]]]);
//# sourceMappingURL=main.2602c0d0.chunk.js.map